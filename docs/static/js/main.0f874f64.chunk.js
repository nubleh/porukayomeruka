(this.webpackJsonpporukayomeruka=this.webpackJsonpporukayomeruka||[]).push([[0],{21:function(n,t,e){},25:function(n,t,e){"use strict";e.r(t);var a,i,r,o,c,s,u,h,b,l,d,f,p,j,g,m,O,v,x,w,y,k=e(0),E=e.n(k),M=e(13),P=e.n(M),S=(e(21),e(7)),T=e(5),F=e(4),I=function(n){var t=n.split("\n"),e=t[1].split(","),a=[];return t.forEach((function(n){var t=n.split(","),i=t[0],r=parseInt(t[3],10)||0;if(i&&r){for(var o={name:i,url:t[1],img:t[2],total:r,points:{}},c=3;c<e.length;c++){var s=e[c],u=parseInt(t[c]||"",10);s&&"0"!==s&&u&&(o.points[s]=u)}a.push(o)}})),a},C=e(2),H=e(3),D=H.b.div(a||(a=Object(C.a)(["\n  font-family: sans-serif;\n  background: #fff;\n"]))),z=H.b.div(i||(i=Object(C.a)(["\n  position: sticky;\n  top: 0;\n  z-index: 10;\n"]))),Y=H.b.div(r||(r=Object(C.a)(["\n  text-align: center;\n  padding: 16px;\n  img {\n    border-radius: 16px;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n    max-height: 25vw;\n  }\n"]))),A=H.b.div(o||(o=Object(C.a)(["\n  margin: 8px 0;\n  position: relative;\n"]))),L=H.b.div(c||(c=Object(C.a)(["\n  text-align: right;\n  transition: transform 0.5s;\n  padding: 0 8px;\n  font-weight: bold;\n  ","\n"])),(function(n){var t=n.barHeight;return Object(H.a)(s||(s=Object(C.a)(["\n    height: ","px;\n    line-height: ","px;\n  "])),t,t)})),R=H.b.div(u||(u=Object(C.a)(["\n  position: absolute;\n  top: 0;\n  background: #ddd;\n  width: 100%;\n  transition: transform 1s;\n  transform-origin: top left;\n"]))),W=H.b.div(h||(h=Object(C.a)(["\n  background-size: 150% auto;\n  background-position: center top;\n"]))),X=H.b.div(b||(b=Object(C.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  transition: transform 0.5s;\n  cursor: pointer;\n  &:hover {\n    opacity: 0.9;\n  }\n  ","\n"])),(function(n){var t=n.barHeight;return Object(H.a)(l||(l=Object(C.a)(["\n    height: ","px;\n    line-height: ","px;\n\n    "," {\n      left: ","px;\n      height: ","px;\n    }\n\n    "," {\n      width: ","px;\n      height: ","px;\n    }\n  "])),t,t,R,t,t,W,t,t)})),q=H.b.div(d||(d=Object(C.a)(["\n  position: relative;\n  display: flex;\n  z-index: 5;\n"]))),B=H.b.div(f||(f=Object(C.a)(["\n  flex: 1 1 auto;\n  padding: 0 8px;\n"]))),J=H.b.div(p||(p=Object(C.a)(["\n  flex: none;\n  padding: 0 8px;\n"]))),K=H.b.div(j||(j=Object(C.a)(["\n    height: 50vw;\n"]))),U=e(1),G=["rgba(255, 0, 0, 0.5)","rgba(0, 0, 255, 0.5)","rgba(0, 255, 0, 0.5)"],N=H.b.div(g||(g=Object(C.a)(["\n  position: absolute;\n  text-align: center;\n  width: 100%;\n  height: 0;\n\n  canvas {\n    pointer-events: none;\n    position: relative;\n  }\n  ","\n"])),(function(n){var t=n.height;return Object(H.a)(m||(m=Object(C.a)(["\n    canvas {\n      width: ","px;\n      height: ","px;\n    }\n  "])),t,t)})),Q=(H.b.img(O||(O=Object(C.a)(["\n  position: absolute;\n  max-width: 50vw;\n  max-height: 25vh;\n  top: 0;\n  background: #fff;\n  opacity: 0.5;\n  pointer-events: none;\n"]))),H.b.div(v||(v=Object(C.a)(["\n  display: inline-block;\n  vertical-align: middle;\n  width: 12px;\n  height: 12px;\n  margin: 0 4px;\n  border: solid 1px #fff;\n"])))),V=H.b.div(x||(x=Object(C.a)(["\n  width: 1px;\n  height: 1px;\n  position: absolute;\n  left: 50%;\n  ","\n"])),(function(n){var t=n.top;return Object(H.a)(w||(w=Object(C.a)(["\n    top: ","px;\n  "])),t)})),Z=H.b.div(y||(y=Object(C.a)(["\n  position: absolute;\n  padding: 4px;\n  background: rgba(255, 255, 255, 0.8);\n  border-radius: 4px;\n  white-space: nowrap;\n  transform: translateX(-50%) translateY(-50%);\n  cursor: pointer;\n  font-size: 0.8em;\n\n  &:hover {\n    opacity: 0.9;\n  }\n\n  span {\n    vertical-align: middle;\n  }\n"]))),$=function(n){var t=n.map((function(n){return n.name.split(/\s+/).reverse()[0]}));return t},_=function(n){var t=n.height,e=n.data,a=n.cols,i=n.maxPoint,r=n.optionalSort,o=n.setOptionalSort,c=Object(k.useRef)({}),s=Object(k.useRef)(0),u=Object(k.useRef)(null),h=(e||[]).map((function(n){return n.name})).sort().join(","),b=(e||[]).map((function(n,t){return Object(S.a)(Object(S.a)({},n),{},{color:G[t%G.length]})})),l=function n(){var t=!0;Object.keys(c.current).forEach((function(n){c.current[n]=Math.min(c.current[n]+1,100),c.current[n]<100&&(t=!1)})),function(n){var t=n.cv,e=n.axes,a=n.data,i=n.step,r=n.animFrameCount,o=n.maxPoint,c=null===t||void 0===t?void 0:t.getContext("2d");if(t&&c){t.width=t.width+0;var s=.3*t.width,u=t.width/2,h=t.height/2;c.lineWidth=4;var b=[];e.forEach((function(n,t){var a=t/e.length*(2*Math.PI),i=u+Math.sin(a)*s,r=h-Math.cos(a)*s;b.push([i,r])}));var l=new Path2D;l.moveTo(b[0][0],b[0][1]),b.forEach((function(n,t){var e=b[t+1]||b[0];c.beginPath(),c.moveTo(n[0],n[1]),c.lineTo(e[0],e[1]),c.stroke(),l.lineTo(e[0],e[1])})),l.closePath(),c.fillStyle="rgba(255, 255, 255, 0.9)",c.fill(l,"evenodd"),b.forEach((function(n){var t=Object(F.a)(n,2),e=t[0],a=t[1];c.beginPath(),c.moveTo(u,h),c.lineTo(e,a),c.stroke()})),a.forEach((function(n,t){var a=n.name,b=n.color,l=i[a],d=r/e.length,f=[];e.forEach((function(t,a){var i=n.data[t];if(i){var r=d*a,c=i/o*s*(Math.min(d,Math.max(0,l-r))/d),b=a/e.length*(2*Math.PI),p=u+Math.sin(b)*c,j=h-Math.cos(b)*c;f.push([p,j])}else f.push([u,h])}));var p=new Path2D;p.moveTo(f[0][0],f[0][1]),f.forEach((function(n,t){var e=f[t+1]||f[0];p.lineTo(e[0],e[1])})),p.closePath(),c.fillStyle=b,c.fill(p,"evenodd")}))}}({cv:u.current,axes:a||[],data:b,step:c.current,animFrameCount:100,maxPoint:i}),t||(cancelAnimationFrame(s.current),s.current=requestAnimationFrame(n))};Object(k.useEffect)((function(){var n=Object.keys(c.current),t=(e||[]).map((function(n){return n.name}));n.forEach((function(n){-1===t.indexOf(n)&&delete c.current[n]})),t.forEach((function(n){"undefined"===typeof c.current[n]&&(c.current[n]=0)})),cancelAnimationFrame(s.current),s.current=requestAnimationFrame(l)}),[h,e]);var d=t/2.5,f=$(b);return Object(U.jsxs)(N,{height:t,children:[Object(U.jsx)("canvas",{ref:u,width:2*t,height:2*t}),(a||[]).map((function(n,e,a){var i=e/a.length*(2*Math.PI),c=Math.sin(i)*d,s=-Math.cos(i)*d;return Object(U.jsx)(V,{top:t/2,style:{transform:"translateX(".concat(c,"px) translateY(").concat(s,"px)")},onClick:function(){o&&o(n)},children:Object(U.jsxs)(Z,{style:{background:n===r?"rgba(0, 0, 0, 0.7)":"",color:n===r?"#fff":""},children:[Object(U.jsx)("div",{children:n}),Object(U.jsx)("div",{children:b.map((function(t,e){var a=f[e];return Object(U.jsxs)("div",{children:[Object(U.jsxs)("span",{children:[a," (",t.data[n],")"]}),Object(U.jsx)(Q,{style:{background:t.color}})]},t.name)}))})]})},n)}))]})},nn={"\u77e5\u8b58":["\u5e38\u8b58\u529b","\u5c02\u9580\u77e5\u8b58"],"\u5f79\u5272\u7406\u89e3":["\u7a7a\u9593\u8a8d\u8b58","\u96c6\u56e3\u529b"],"\u5171\u611f":["\u4eba\u60c5\u529b","\u5927\u4eba\u529b"],"\u6d1e\u5bdf":["\u60c5\u5831\u7d71\u5408\u529b","\u77ac\u767a\u529b"],"\u30bf\u30a4\u30df\u30f3\u30b0":["\u30ea\u30ba\u30e0\u611f","\u9593\u5408\u3044"]},tn={"\u77e5\u8b58":"Knowledge","\u5f79\u5272\u7406\u89e3":"Understanding one's role","\u5171\u611f":"Empathy","\u6d1e\u5bdf":"Insight","\u30bf\u30a4\u30df\u30f3\u30b0":"Timing"},en="img/",an=function(){var n=Object(k.useState)([]),t=Object(F.a)(n,2),e=t[0],a=t[1],i=Object(k.useState)([]),r=Object(F.a)(i,2),o=r[0],c=r[1],s=Object(k.useState)(window.innerHeight/20),u=Object(F.a)(s,2),h=u[0],b=u[1],l=Object(k.useState)(Math.min(window.innerHeight/2,window.innerWidth)),d=Object(F.a)(l,2),f=d[0],p=d[1],j=Object(k.useState)(!1),g=Object(F.a)(j,2),m=g[0],O=g[1],v=Object(k.useState)(Date.now()),x=Object(F.a)(v,2),w=x[0],y=x[1],E=Object(k.useState)(""),M=Object(F.a)(E,2),P=M[0],C=M[1];Object(k.useEffect)((function(){var n=function(){b(window.innerHeight/20),p(Math.min(window.innerHeight/2,window.innerWidth)),y(Date.now())};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),Object(k.useEffect)((function(){(function(n){return new Promise((function(t){fetch(n).then((function(n){return n.text()})).then((function(n){t(I(n))}))}))})("yomeruka.csv").then((function(n){a(n)}))}),[]),Object(k.useEffect)((function(){setTimeout((function(){O(!0)}),500)}),[]),Object(k.useEffect)((function(){0===o.length&&C("")}),[o]);var H=Object(T.a)(e).sort((function(n,t){var e=P?n.points[P]:n.total,a=P?t.points[P]:t.total;return e>a?-1:e<a?1:0})).map((function(n){return n.name})),G=o.length>0?f:0;return Object(U.jsxs)(D,{children:[Object(U.jsx)(Y,{children:Object(U.jsx)("img",{src:"game.png",alt:"Kuuki Yomi 3"})}),o.length>0&&Object(U.jsx)(z,{children:Object(U.jsx)(_,{height:f,cols:Object.keys(nn),optionalSort:P,setOptionalSort:function(n){C(n===P?"":n)},maxPoint:Math.max.apply(Math,Object(T.a)(e.map((function(n){return Math.max.apply(Math,Object(T.a)(Object.keys(nn).map((function(t){return n.points[t]}))))})))),data:o.map((function(n){var t=e.find((function(t){return t.name===n}));return t?{name:n,data:Object(S.a)({},t.points),img:"".concat(en).concat(t.img)}:{name:"",data:{},img:""}})).filter((function(n){return!!n}))},w)}),Object(U.jsxs)(A,{style:{height:"".concat(G+h*(e.length+1),"px")},children:[Object(U.jsx)(L,{barHeight:h,style:{transform:"translateY(".concat(G,"px)"),transitionDelay:"".concat(o.length>0?.01*e.length:0,"s")},children:P?"".concat(P," (").concat(tn[P],")"):"Total"}),e.map((function(n){var t=P?n.points[P]:n.total,a=P?t/200:n.total/1e3,i=H.indexOf(n.name),r=-1!==o.indexOf(n.name),s=o.length>0?.01*(e.length-i):.01*i;return Object(U.jsxs)(X,{barHeight:h,style:{transform:"translateY(".concat(G+(i+1)*h,"px)"),transitionDelay:"".concat(s,"s")},onClick:function(){var t;t=n.name,c((function(n){return[].concat(Object(T.a)(n.filter((function(n){return n!==t}))),Object(T.a)(-1===n.indexOf(t)?[t]:[])).slice(0,2)}))},children:[Object(U.jsx)(R,{style:{transform:"scaleX(".concat(m?a:0,")"),background:r?"#bbb":""}}),Object(U.jsxs)(q,{children:[Object(U.jsx)(W,{style:n.img?{backgroundImage:"url(".concat(en).concat(n.img,")")}:{}}),Object(U.jsxs)(B,{children:[i+1,". ",n.name]}),Object(U.jsx)(J,{children:t})]})]},n.name)}))]}),Object(U.jsx)(K,{})]})},rn=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,26)).then((function(t){var e=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;e(n),a(n),i(n),r(n),o(n)}))};P.a.render(Object(U.jsx)(E.a.StrictMode,{children:Object(U.jsx)(an,{})}),document.getElementById("root")),rn()}},[[25,1,2]]]);
//# sourceMappingURL=main.0f874f64.chunk.js.map